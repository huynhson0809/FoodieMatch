{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sterling/Desktop/FoodMatch/components/ui/map/index.tsx"],"sourcesContent":["\"use client\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport { useEffect } from \"react\";\n\n// 1. C·∫•u h√¨nh Icon (Gi·ªØ nguy√™n nh∆∞ c≈©)\nconst iconUser = L.icon({\n  iconUrl: \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png\",\n  shadowUrl: \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n});\n\n// Icon m√†u ƒë·ªè cho qu√°n ƒÉn (ƒë·ªÉ ph√¢n bi·ªát v·ªõi user)\nconst iconFood = L.icon({\n  iconUrl:\n    \"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png\",\n  shadowUrl:\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n});\n\ninterface MapProps {\n  center: [number, number];\n  markers: Array<{ lat: number; lon: number; name: string }>;\n}\n\n// 2. Component con ƒë·ªÉ x·ª≠ l√Ω n√∫t \"V·ªÅ v·ªã tr√≠ hi·ªán t·∫°i\"\nfunction RecenterButton({ center }: { center: [number, number] }) {\n  const map = useMap(); // Hook n√†y cho ph√©p ƒëi·ªÅu khi·ªÉn map\n\n  const handleRecenter = () => {\n    // Hi·ªáu ·ª©ng bay (flyTo) m∆∞·ª£t m√† v·ªÅ v·ªã tr√≠ user\n    map.flyTo(center, 15, {\n      animate: true,\n      duration: 1.5, // Bay trong 1.5 gi√¢y\n    });\n  };\n\n  return (\n    <button\n      onClick={handleRecenter}\n      style={{\n        position: \"absolute\",\n        top: \"10px\",\n        right: \"10px\",\n        zIndex: 1000, // ƒê√® l√™n b·∫£n ƒë·ªì\n        backgroundColor: \"white\",\n        border: \"2px solid #ffb6c1\", // Vi·ªÅn h·ªìng\n        borderRadius: \"50%\",\n        width: \"40px\",\n        height: \"40px\",\n        cursor: \"pointer\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\n        fontSize: \"20px\",\n      }}\n      title=\"V·ªÅ v·ªã tr√≠ c·ªßa t√¥i\"\n    >\n      üéØ\n    </button>\n  );\n}\n\nexport default function Map({ center, markers }: MapProps) {\n  // H√†m t·∫°o Deep Link ch·ªâ ƒë∆∞·ªùng\n  const getDirectionsLink = (lat: number, lng: number) => {\n    // Link n√†y ho·∫°t ƒë·ªông tr√™n c·∫£ Android v√† iOS\n    // N·∫øu c√≥ App Google Maps n√≥ s·∫Ω m·ªü App, n·∫øu kh√¥ng n√≥ m·ªü web\n    return `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;\n  };\n\n  return (\n    <MapContainer\n      center={center}\n      zoom={15}\n      style={{ height: \"100%\", width: \"100%\", borderRadius: \"15px\" }}\n    >\n      {/* 3. Thay ƒë·ªïi Theme b·∫£n ƒë·ªì: CartoDB Voyager (M√†u pastel, b·ªè nh√£n r∆∞·ªùm r√†) */}\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\n        url=\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\"\n      />\n\n      {/* N√∫t quay v·ªÅ v·ªã tr√≠ hi·ªán t·∫°i */}\n      <RecenterButton center={center} />\n\n      {/* Marker v·ªã tr√≠ User */}\n      <Marker position={center} icon={iconUser}>\n        <Popup>B·∫°n ƒëang ·ªü ƒë√¢y! üè†</Popup>\n      </Marker>\n\n      {/* Marker qu√°n ƒÉn */}\n      {markers.map((place, idx) => (\n        <Marker key={idx} position={[place.lat, place.lon]} icon={iconFood}>\n          <Popup>\n            <div className=\"text-center\">\n              <b className=\"text-pink-600 text-lg\">{place.name}</b> <br />\n              {/* 4. N√∫t Deep Link ch·ªâ ƒë∆∞·ªùng */}\n              <a\n                href={getDirectionsLink(place.lat, place.lon)}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                className=\"inline-block mt-2 bg-blue-500 text-white px-3 py-1 rounded-lg text-sm font-bold no-underline hover:bg-blue-600\"\n              >\n                üöÄ Ch·ªâ ƒë∆∞·ªùng ngay\n              </a>\n            </div>\n          </Popup>\n        </Marker>\n      ))}\n    </MapContainer>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;;;AAHA;;;;AAMA,uCAAuC;AACvC,MAAM,WAAW,+JAAC,CAAC,IAAI,CAAC;IACtB,SAAS;IACT,WAAW;IACX,UAAU;QAAC;QAAI;KAAG;IAClB,YAAY;QAAC;QAAI;KAAG;AACtB;AAEA,kDAAkD;AAClD,MAAM,WAAW,+JAAC,CAAC,IAAI,CAAC;IACtB,SACE;IACF,WACE;IACF,UAAU;QAAC;QAAI;KAAG;IAClB,YAAY;QAAC;QAAI;KAAG;IACpB,aAAa;QAAC;QAAG,CAAC;KAAG;AACvB;AAOA,qDAAqD;AACrD,SAAS,eAAe,EAAE,MAAM,EAAgC;;IAC9D,MAAM,MAAM,IAAA,6JAAM,KAAI,mCAAmC;IAEzD,MAAM,iBAAiB;QACrB,8CAA8C;QAC9C,IAAI,KAAK,CAAC,QAAQ,IAAI;YACpB,SAAS;YACT,UAAU;QACZ;IACF;IAEA,qBACE,6LAAC;QACC,SAAS;QACT,OAAO;YACL,UAAU;YACV,KAAK;YACL,OAAO;YACP,QAAQ;YACR,iBAAiB;YACjB,QAAQ;YACR,cAAc;YACd,OAAO;YACP,QAAQ;YACR,QAAQ;YACR,SAAS;YACT,YAAY;YACZ,gBAAgB;YAChB,WAAW;YACX,UAAU;QACZ;QACA,OAAM;kBACP;;;;;;AAIL;GApCS;;QACK,6JAAM;;;KADX;AAsCM,SAAS,IAAI,EAAE,MAAM,EAAE,OAAO,EAAY;IACvD,8BAA8B;IAC9B,MAAM,oBAAoB,CAAC,KAAa;QACtC,4CAA4C;QAC5C,2DAA2D;QAC3D,OAAO,CAAC,mDAAmD,EAAE,IAAI,CAAC,EAAE,KAAK;IAC3E;IAEA,qBACE,6LAAC,0KAAY;QACX,QAAQ;QACR,MAAM;QACN,OAAO;YAAE,QAAQ;YAAQ,OAAO;YAAQ,cAAc;QAAO;;0BAG7D,6LAAC,oKAAS;gBACR,aAAY;gBACZ,KAAI;;;;;;0BAIN,6LAAC;gBAAe,QAAQ;;;;;;0BAGxB,6LAAC,8JAAM;gBAAC,UAAU;gBAAQ,MAAM;0BAC9B,cAAA,6LAAC,4JAAK;8BAAC;;;;;;;;;;;YAIR,QAAQ,GAAG,CAAC,CAAC,OAAO,oBACnB,6LAAC,8JAAM;oBAAW,UAAU;wBAAC,MAAM,GAAG;wBAAE,MAAM,GAAG;qBAAC;oBAAE,MAAM;8BACxD,cAAA,6LAAC,4JAAK;kCACJ,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAAyB,MAAM,IAAI;;;;;;gCAAK;8CAAC,6LAAC;;;;;8CAEvD,6LAAC;oCACC,MAAM,kBAAkB,MAAM,GAAG,EAAE,MAAM,GAAG;oCAC5C,QAAO;oCACP,KAAI;oCACJ,WAAU;8CACX;;;;;;;;;;;;;;;;;mBAVM;;;;;;;;;;;AAmBrB;MAjDwB"}}]
}